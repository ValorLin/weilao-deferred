<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Weilao Deferred</title>
    <!--[if lte IE 8]>
    <script src="http://rawgit.com/zhangxinxu/ieBetter.js/master/1.0.3/ieBetter-min.js"></script>
    <![endif]-->
    <script type="text/javascript" src="src/weilao-deferred.js"></script>
</head>
<body>
<pre>
    (function () {

        // Define an async function using Deferred()
        function getResponseTextAsync() {
            var defer = Deferred();
            setTimeout(function () {
                if (Math.random() > 0.5) {
                    defer.resolve('Response Text');
                } else {
                    defer.reject('Fail Response!');
                }
            }, 1000);
            return defer;
        }

        // Usage
        getResponseTextAsync()
                .done(alert)
                .fail(alert)
                .always(function () {
                    alert('Always~');
                });

    })();
</pre>
<script type="text/javascript">
    (function () {

        // Setup a async function with using Deferred()
        function getResponseTextAsync() {
            var defer = Deferred();
            setTimeout(function () {
                if (Math.random() > 0.5) {
                    defer.resolve('Response Text');
                } else {
                    defer.reject('Fail Response!');
                }
            }, 1000);
            return defer;
        }

        // Usage
        getResponseTextAsync()
                .done(alert)
                .fail(alert)
                .always(function () {
                    alert('Always~');
                });

    })();
</script>
</body>
</html>